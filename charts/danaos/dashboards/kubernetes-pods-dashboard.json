{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"iteration":1552031504884,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","fill":0,"gridPos":{"h":8,"w":12,"x":0,"y":0},"height":"","hideTimeOverride":false,"id":1,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":false,"rightSide":true,"show":true,"sideWidth":null,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_memory_usage_bytes{pod=\"$pod\", namespace=\"$namespace\"}) by (namespace,pod)","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"total","refId":"B","step":30},{"expr":"sum(container_memory_rss{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"rss","metric":"","refId":"A","step":30},{"expr":"sum(container_memory_cache{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"cache","refId":"D","step":30},{"expr":"sum(container_memory_swap{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"swap","refId":"C","step":30},{"expr":"sum(container_memory_failures_total{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","hide":true,"intervalFactor":2,"legendFormat":"failures_total","refId":"E","step":20},{"expr":"sum(container_memory_failcnt{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","hide":true,"intervalFactor":2,"legendFormat":"failcnt","refId":"F","step":20},{"expr":"sum(container_memory_working_set_bytes{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","hide":true,"intervalFactor":2,"legendFormat":"working_set","refId":"G","step":20}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"内存使用量","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":["total"]},"yaxes":[{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"bytes","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","decimals":null,"description":"获取CPU资源使用情况，判断方式现在时刻和一分钟前的数据进行对比。","fill":0,"gridPos":{"h":8,"w":12,"x":12,"y":0},"id":2,"legend":{"alignAsTable":true,"avg":false,"current":true,"hideEmpty":false,"hideZero":false,"max":true,"min":false,"rightSide":true,"show":true,"sideWidth":null,"total":false,"values":true},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"expr":"sum(rate(container_cpu_system_seconds_total{namespace=\"$namespace\",pod=\"$pod\"}[1m])) by (namespace,pod)","format":"time_series","hide":false,"interval":"30s","intervalFactor":1,"legendFormat":"system","metric":"","refId":"A","step":30},{"expr":"sum(rate(container_cpu_user_seconds_total{namespace=\"$namespace\",pod=\"$pod\"}[1m])) by (namespace,pod)","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"user","refId":"C","step":30},{"expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",pod=\"$pod\"}[1m])) by (namespace,pod)","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"total","refId":"B","step":30}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"CPU使用量（核）","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":["total"]},"yaxes":[{"format":"short","label":"","logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","fill":1,"gridPos":{"h":5,"w":12,"x":0,"y":8},"id":6,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_network_receive_packets_total{namespace=\"$namespace\",pod=\"$pod\"}[1m])) by (namespace,pod)","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"in","refId":"A","step":120},{"expr":"sum(rate(container_network_transmit_packets_total{namespace=\"$namespace\",pod=\"$pod\"}[1m])) by (namespace,pod)","format":"time_series","interval":"1m","intervalFactor":2,"legendFormat":"out","refId":"B","step":120},{"expr":"sum(rate(container_network_receive_errors_total{namespace=\"$namespace\",pod=\"$pod\"}[1m])) by (namespace,pod) + sum(rate(container_network_transmit_errors_total{namespace=\"$namespace\",pod=\"$pod\"}[1m])) by (namespace,pod) + sum(rate(container_network_receive_packets_dropped_total{namespace=\"$namespace\",pod=\"$pod\"}[1m])) by (namespace,pod) + sum(rate(container_network_transmit_packets_dropped_total{namespace=\"$namespace\",pod=\"$pod\"}[1m])) by (namespace,pod)","format":"time_series","interval":"1m","intervalFactor":1,"legendFormat":"error","refId":"C","step":60}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"数据包","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"pps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"pps","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","fill":0,"gridPos":{"h":5,"w":12,"x":12,"y":8},"id":5,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(rate(container_network_receive_bytes_total{pod=\"$pod\", namespace=\"$namespace\"}[1m])*1) by (namespace,container)","format":"time_series","interval":"1m","intervalFactor":1,"legendFormat":"in","metric":"","refId":"A","step":60},{"expr":"sum(rate(container_network_transmit_bytes_total{pod=\"$pod\", namespace=\"$namespace\"}[1m])*1) by (namespace,container)","format":"time_series","interval":"1m","intervalFactor":1,"legendFormat":"out","refId":"B","step":60}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"网络流量","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"bps","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","fill":0,"gridPos":{"h":5,"w":12,"x":0,"y":13},"hideTimeOverride":false,"id":3,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"sortDesc":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":null,"seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_fs_limit_bytes{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","intervalFactor":2,"legendFormat":"total","refId":"A","step":4},{"expr":"sum(container_fs_usage_bytes{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","intervalFactor":2,"legendFormat":"usage","refId":"B","step":4}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"硬盘使用量","tooltip":{"shared":false,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"decbytes","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":"$datasource","fill":0,"gridPos":{"h":5,"w":12,"x":12,"y":13},"id":4,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":false,"min":false,"rightSide":true,"show":true,"total":false,"values":false},"lines":true,"linewidth":2,"links":[],"nullPointMode":"null","paceLength":10,"percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(container_fs_reads_total{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"read","refId":"A","step":30},{"expr":"sum(container_fs_writes_total{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","interval":"30s","intervalFactor":1,"legendFormat":"write","refId":"B","step":30},{"expr":"sum(container_fs_io_current{namespace=\"$namespace\",pod=\"$pod\"}) by (namespace,pod)","format":"time_series","intervalFactor":2,"legendFormat":"current","refId":"C","step":4}],"thresholds":[],"timeFrom":null,"timeRegions":[],"timeShift":null,"title":"IO","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":18,"style":"dark","tags":["Kubernetes","Pod"],"templating":{"list":[{"hide":0,"label":null,"name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"},{"allValue":null,"current":{"text":"kube-system","value":"kube-system"},"datasource":"$datasource","definition":"","hide":0,"includeAll":false,"label":"namespace","multi":false,"name":"namespace","options":[],"query":"label_values(kube_pod_info{namespace=~\".+\"},namespace)","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"datasource":"$datasource","definition":"","hide":0,"includeAll":false,"label":"Pod","multi":false,"name":"pod","options":[],"query":"label_values(kube_pod_info{namespace=~\"$namespace\"}, pod)","refresh":2,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-30m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"browser","title":"Kubernetes/Pods","uid":"kubernetespods","version":1}
